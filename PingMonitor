# Create log folder if it doesn't exist
$logDir = "C:\pinglogs"
if (-not (Test-Path $logDir)) {
    New-Item -ItemType Directory -Path $logDir | Out-Null
}

# Define log file path
$logFile = "$logDir\8.8.8.8 ping logs.txt"

# Start continuous ping
while ($true) {
    $timestamp = Get-Date -Format "yyyy-MM-dd HH:mm:ss"
    $ping = Test-Connection -ComputerName 8.8.8.8 -Count 1 -Quiet
    if ($ping) {
        $latency = (Test-Connection -ComputerName 8.8.8.8 -Count 1 | Select-Object -ExpandProperty ResponseTime)
        $logLine = "$timestamp | True | ${latency}ms"
        Write-Host "$timestamp - Reply from 192.168.1.66: time=${latency}ms" -ForegroundColor Green
    } else {
        $logLine = "$timestamp | False"
        Write-Host "$timestamp - Request timed out." -ForegroundColor Red
    }
    Add-Content -Path $logFile -Value $logLine
    Start-Sleep -Seconds 1
}
